<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nike.geo.model.CommDaoImpl">

	<!-- division 별 공통 테이블 가져오기 -->
	<!-- REF NULL 아닌 경우만 가능 -->
	<select id="commSelect" resultType="CommonVo">
		SELECT COMMON_CODE ,CODE_NAME ,DIVISION ,
			REG_ID ,REG_DATE ,MOD_ID ,MOD_DATE,REF 
	 FROM COM c 
	 WHERE DIVISION = #{division}
	</select>

	<!-- 로그인 selectEmp -->
	<select id="selectEmp" resultType="EmpVo">
		SELECT EMP_NO, EMP_POS, EMP_DEPT,
				EMP_PW, EMP_NAME, EMP_GENDER,
				EMP_HIREDATE, EMP_EMAIL, EMP_PHONE,
				EMP_BIRTH, EMP_POSTCODE, EMP_ADDRESS1,
				EMP_ADDRESS2, EMP_ADDRESS3, EMP_AUTH,
				EMP_STATUS, EMP_RETIREDATE, REG_ID,
				REG_DATE, MOD_ID, MOD_DATE
			FROM GEO.EMP
			WHERE EMP_NO = #{emp_no} AND EMP_PW = #{emp_pw}
	</select>
	
	<!-- 임시비밀번호 발급 전 정보 확인 selectEmpTemp -->
	<select id="selectEmpTemp" resultType="EmpVo">
		SELECT EMP_NO, EMP_POS, EMP_DEPT,
				EMP_PW, EMP_NAME, EMP_GENDER,
				EMP_HIREDATE, EMP_EMAIL, EMP_PHONE,
				EMP_BIRTH, EMP_ADDRESS, EMP_AUTH,
				EMP_STATUS, EMP_RETIREDATE, REG_ID,
				REG_DATE, MOD_ID, MOD_DATE
			FROM GEO.EMP
			WHERE EMP_NO = #{emp_no}
				AND EMP_NAME = #{emp_name}
				AND EMP_EMAIL = #{emp_email}
	</select>
	
	<!-- 임시비밀번호 발급 updateTempPw -->
	<update id="updateTempPw">
		UPDATE GEO.EMP
			SET EMP_PW=#{emp_pw}, EMP_STATUS='W',  MOD_ID='ADMIN', MOD_DATE=SYSDATE
			WHERE EMP_NO=#{emp_no}
	</update>
	
	
	<select id="findFile" resultType="FileVo">
		SELECT FILE_NO, ORIGIN_NO, FILE_ONAME,
				FILE_SNAME, FILE_SIZE, FILE_TYPE,
				FILE_RANK, FILE_DEL_YN, REG_ID,
				REG_DATE, MOD_ID, MOD_DATE
			FROM GEO."FILE"
			WHERE FILE_NO = #{file_no}
	</select>
</mapper>
